package myspring;

import java.util.InputMismatchException;
import java.util.List;
import java.util.Scanner;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class AssignTest { //입사년도, 부서번호
	public static void main(String[] args) throws Exception {
		int year = 2014;
		int deptId = 90;
		
		ApplicationContext context = new ClassPathXmlApplicationContext("spring-context.xml");
		EmpService service = (EmpService) context.getBean(EmpService.class);
		
		
		Scanner scan = new Scanner(System.in);
		int yes = 10;
		
		while(yes!=0) {
	         System.out.println("<원하는 검색방법 번호를 입력하세요>(0 입력시 종료됩니다)");
	         System.out.println("1.이름 2.입사년도 3. 부서번호 4. 도시이름 5.통계자료 6. 부서장이름을 통한 부서원검색");
	         try {
	         way = scan.nextInt();
	         } catch (InputMismatchException e) {
	             System.out.println("숫자로 다시 입력해주세요.");
	             scan.nextLine();
	             continue;
	         }
	         switch(yes) {
	         case 1:
	            searchByName();
	            break;
	         case 2:
	            searchByYear();
	            break;
	         case 3:
	            searchByDeptId();
	            break;
	         case 4:
	            searchByCity();
	            break;
	         case 5:
	            EmpDAO.printStat();
	            break;
	         case 6:
	            EmpDAO.findEmpByManagerName();
	            break;
	         default:
	            System.out.println("선택지에 없는 번호입니다.");
	            break;
	         }
	      }
	      System.out.println("-프로그램 종료-");
		
		
		
		
		
		
		// 입사년도로 검색
		System.out.println(year + "에 입사한 직원들을 알려줄게요");
		List<Emp> empList = service.findEmpByYear(year);
		for (Emp emp : empList) {
			System.out.println(emp);
		}
		
		// 부서번호로 검색
		System.out.println(deptId + "에 존재하는 직원들을 알려줄게요");
		List<Emp> empList2 = service.findEmpByDeptId(deptId);
		for (Emp emp : empList2) {
			System.out.println(emp);
		}
	}
}
